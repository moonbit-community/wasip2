// Generated by `wit-bindgen` 0.49.0. DO NOT EDIT!

///|
/// Get the POSIX-style environment variables.
///
/// Each environment variable is provided as a pair of string variable names
/// and string value.
///
/// Morally, these are a value import, but until value imports are available
/// in the component model, this import function should return the same
/// values each time it is called.
pub fn get_environment() -> Array[(String, String)] {
  let return_area = mbt_ffi_malloc(8)
  wasmImportGetEnvironment(return_area)
  let array : Array[(String, String)] = []
  for index = 0; index < mbt_ffi_load32(return_area + 4); index = index + 1 {
    let iter_base = mbt_ffi_load32(return_area + 0) + index * 16
    let result = mbt_ffi_ptr2str(
      mbt_ffi_load32(iter_base + 0),
      mbt_ffi_load32(iter_base + 4),
    )
    let result0 = mbt_ffi_ptr2str(
      mbt_ffi_load32(iter_base + 8),
      mbt_ffi_load32(iter_base + 12),
    )
    array.push((result, result0))
  }
  mbt_ffi_free(mbt_ffi_load32(return_area + 0))
  mbt_ffi_free(return_area)
  return array
}

///|
/// Get the POSIX-style arguments to the program.
pub fn get_arguments() -> Array[String] {
  let return_area = mbt_ffi_malloc(8)
  wasmImportGetArguments(return_area)
  let array : Array[String] = []
  for index = 0; index < mbt_ffi_load32(return_area + 4); index = index + 1 {
    let iter_base = mbt_ffi_load32(return_area + 0) + index * 8
    let result = mbt_ffi_ptr2str(
      mbt_ffi_load32(iter_base + 0),
      mbt_ffi_load32(iter_base + 4),
    )
    array.push(result)
  }
  mbt_ffi_free(mbt_ffi_load32(return_area + 0))
  mbt_ffi_free(return_area)
  return array
}

///|
/// Return a path that programs should use as their initial current working
/// directory, interpreting `.` as shorthand for this.
pub fn initial_cwd() -> String? {
  let return_area = mbt_ffi_malloc(12)
  wasmImportInitialCwd(return_area)
  let lifted : String? = match mbt_ffi_load8_u(return_area + 0) {
    0 => Option::None
    1 => {
      let result = mbt_ffi_ptr2str(
        mbt_ffi_load32(return_area + 4),
        mbt_ffi_load32(return_area + 8),
      )
      Option::Some(result)
    }
    _ => panic()
  }
  mbt_ffi_free(return_area)
  return lifted
}
