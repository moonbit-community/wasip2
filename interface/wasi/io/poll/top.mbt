// Generated by `wit-bindgen` 0.49.0. DO NOT EDIT!

///|
pub(all) struct Pollable(Int) derive(Show, Eq)

///|
/// Drops a resource handle.
pub fn Pollable::drop(self : Pollable) -> Unit {
  let Pollable(resource) = self
  wasmImportResourceDropPollable(resource)
}

///|
pub fn Pollable::ready(self : Pollable) -> Bool {
  let Pollable(handle) = self
  let result : Int = wasmImportMethodPollableReady(handle)
  return result != 0
}

///|
pub fn Pollable::block(self : Pollable) -> Unit {
  let Pollable(handle) = self
  wasmImportMethodPollableBlock(handle)
}

///|
pub fn poll(in_ : Array[Pollable]) -> FixedArray[UInt] {
  let address = mbt_ffi_malloc(in_.length() * 4)
  for index = 0; index < in_.length(); index = index + 1 {
    let iter_elem : Pollable = in_[index]
    let iter_base = address + index * 4
    let Pollable(handle) = iter_elem
    mbt_ffi_store32(iter_base + 0, handle)
  }
  let return_area = mbt_ffi_malloc(8)
  wasmImportPoll(address, in_.length(), return_area)
  let result = mbt_ffi_ptr2uint_array(
    mbt_ffi_load32(return_area + 0),
    mbt_ffi_load32(return_area + 4),
  )
  mbt_ffi_free(address)
  mbt_ffi_free(return_area)
  return result
}
